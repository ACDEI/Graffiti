<app-navbar></app-navbar>

<div class="row mt-5">

    <div class="col-lg-3">
        <div class="text-center">
            <img src={{user?.photoURL}} class="rounded-circle" width="130" height="130" alt="" loading="lazy"/>
            <h4 class="mt-3">{{user?.fullName}}</h4>
            <h6 *ngIf="user?.nickName == ''" class="mt-1">No Nickname yet</h6>
            <h6 *ngIf="user?.nickName != ''" class="mt-1">@{{user?.nickName}}</h6>
        </div>
        <div class="nav flex-column nav-pills text-center" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <a class="nav-link active" id="v-pills-myGraffitis-tab" data-toggle="pill" href="#v-pills-myGraffitis" role="tab" 
                aria-controls="v-pills-myGraffitis" aria-selected="true">Graffitis</a>
          <a class="nav-link" id="v-pills-favourites-tab" data-toggle="pill" href="#v-pills-favourites" role="tab" 
                aria-controls="v-pills-favourites" aria-selected="false" (click)='obtenerLikes()'>Favoritas</a>
          <a class="nav-link" id="v-pills-followers-tab" data-toggle="pill" href="#v-pills-followers" role="tab" 
                aria-controls="v-pills-followers" aria-selected="false" (click)='obtenerFollowers()'>Seguidores</a>
          <a class="nav-link" id="v-pills-followed-tab" data-toggle="pill" href="#v-pills-followed" role="tab" 
                aria-controls="v-pills-followed" aria-selected="false" (click)='obtenerFollowed()'>Seguidos</a>
        </div>
        <div *ngIf="!miPerfil" class="nav flex-column nav-pill mt-3">
          <div *ngIf="!miSeguido">
            <button class="btn btn-dark btn-block mb-3" (click)="followUser(user.uid, user.photoURL, user.nickName)">Seguir</button>
          </div>
          <div *ngIf="miSeguido">
            <button class="btn btn-outline-dark btn-block mb-3" (click)="unfollowUser(user.uid)">Dejar de Seguir</button>
          </div>
        </div>
    </div>

    <div class="col-lg-9 tab-content" id="v-pills-tabContent">

        <div class="tab-pane conf fade text-center active show" id="v-pills-myGraffitis" role="tabpanel" aria-labelledby="v-pills-myGraffitis-tab">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4" *ngFor="let pub of pubList">
                    <app-card-publication [pubR]='pub'></app-card-publication>
                </div>
            </div>
        </div>     
        
        <div class="tab-pane conf fade" id="v-pills-favourites" role="tabpanel" aria-labelledby="v-pills-favourites-tab">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4" *ngFor="let pub of likesList">
                    <app-card-publication-profile [pubR]='pub'></app-card-publication-profile>
                </div>
            </div>
        </div>  
                 
        <div class="tab-pane conf fade" id="v-pills-followers" role="tabpanel" aria-labelledby="v-pills-followers-tab">
            <div *ngFor="let fw of followerList" class="media border p-3 bg-light rounded mb-2">
              <div class="container">
                <div class="row align-items-center">
                  <div class="col-lg">
                    <img src={{fw.image}} alt="fd-avatar" class="rounded-circle" width="80px">
                  </div>
                  <div class="col-lg text-left">
                    <div class="media-body mt-2">
                      <h4>{{fw.nick}}</h4>
                    </div>
                  </div>
                  <div class="col-lg text-right">
                    <div *ngIf="!soyYo(fw.uid)">
                      <div *ngIf="!loSigo(fw.uid)">
                        <button class="btn btn-primary mb-2" (click)="followUser(fw.uid, fw.image, fw.nick)">Seguir</button>
                      </div>
                      <div *ngIf="loSigo(fw.uid)">
                        <button class="btn btn-outline-dark mb-2" (click)="unfollowUser(fw.uid, fw.nick)">Dejar de Seguir</button>
                      </div>
                    </div>
                  </div>
               </div>
              </div>
            </div>
        </div>

        <div class="tab-pane conf fade" id="v-pills-followed" role="tabpanel" aria-labelledby="v-pills-followed-tab">
            <div *ngFor="let fd of followedList" class="media border p-3 bg-light rounded mb-1">
              <div class="container">
                <div class="row align-items-center">
                  <div class="col-lg">
                    <img src="{{fd.image}}" alt="fd-avatar" class="rounded-circle" width="80px">
                  </div>
                  <div class="col-lg text-left">
                    <div class="media-body mt-2">
                      <h4>{{fd.nick}}</h4>
                    </div>
                  </div>
                  <div *ngIf="miPerfil" class="col-lg text-right">
                    <div class="btn btn-outline-dark mb-2" (click)="unfollowUser(fd.uid)">Dejar de Seguir</div>
                  </div>
                  <div *ngIf="!miPerfil && !soyYo()" class="col-lg text-right">
                    <div *ngIf="!loSigo(fd.uid)">
                      <button class="btn btn-primary mb-2" (click)="followUser(fd.uid, fd.image, fd.nick)">Seguir</button>
                    </div>
                    <div *ngIf="loSigo(fd.uid)">
                      <button class="btn btn-outline-dark mb-2" (click)="unfollowUser(fd.uid, fd.nick)">Dejar de Seguir</button>
                    </div>
                  </div>
               </div>
              </div>
            </div>
        </div>
    </div>
</div>
